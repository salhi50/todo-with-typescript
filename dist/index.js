"use strict";const todoInput=document.getElementById("todo-input"),addBtn=document.getElementById("add-btn"),todosMenu=document.getElementById("todos-menu");let newTodo="",todos=JSON.parse(localStorage.getItem("todos")||"[]");function updateTodos(){todosMenu.innerHTML="",todos.forEach(e=>{todosMenu.appendChild(createTodoElement(e))}),localStorage.setItem("todos",JSON.stringify(todos))}function addTodo(e){let t=todos.map(e=>e.title);isEmpty(e)||isAlreadyExist(t,e)||(todos.push({id:new Date().getTime(),title:e,isCompleted:!1}),updateTodos(),resetNewTodo())}function isEmpty(e){return 0===e.length||/^[\s]+$/.test(e)}function isAlreadyExist(e,t){return -1!==e.map(e=>e.toLowerCase()).indexOf(t.toLowerCase())}function resetNewTodo(){newTodo="",todoInput.value="",todoInput.focus()}function createTodoElement(e){let t=createElement({type:"p",className:"fs-3 m-0",children:e.title}),o=createElement({type:"span",className:`badge bg-${e.isCompleted?"success":"warning"}-subtle text-black`,children:e.isCompleted?"Completed":"Pending"}),n=createElement({type:"button",className:"btn text-primary",callbackOnClick:t=>toggleCompleteTodo(e.id),children:e.isCompleted?"Uncomplete":"Complete"}),d=createElement({type:"button",className:"btn text-danger",callbackOnClick:t=>deleteTodo(e.id),children:"Delete"}),i=createElement({type:"button",className:"btn text-secondary",callbackOnClick:t=>editTodo(e.id),children:"Edit"}),l=createElement({type:"div",children:[n,d,i]}),s=createElement({type:"footer",className:"d-flex justify-content-between align-items-center",children:[o,l]}),a=createElement({type:"li",className:"list-group-item",children:[t,s]});return a}function createElement(e){let{type:t,className:o,callbackOnClick:n,children:d}=e,i=document.createElement(t);return"string"==typeof o&&(i.className=o),"function"==typeof n&&i.addEventListener("click",n),"string"==typeof d?i.textContent=d:d instanceof HTMLElement?i.appendChild(d):isArray(d)&&(null==d?void 0:d.every(e=>e instanceof HTMLElement))&&d.forEach(e=>i.appendChild(e)),i}function isArray(e){return Array.isArray(e)&&"[object Array]"===Object.prototype.toString.call(e)}function deleteTodo(e){confirm("Are you sure you want to delete this todo?")&&(todos=todos.filter(t=>t.id!==e),updateTodos())}function editTodo(e){let t=prompt("Enter the new todo title: ");if(null!==t&&!isEmpty(t)){let o=todos.findIndex(t=>t.id===e);-1!==o&&(todos[o].title=t,updateTodos())}}function toggleCompleteTodo(e){let t=todos.findIndex(t=>t.id===e),o=todos[t].isCompleted;todos[t].isCompleted=!o,updateTodos()}updateTodos(),todoInput.addEventListener("input",function(e){newTodo=this.value}),todoInput.addEventListener("keydown",function(e){"Enter"===e.key&&addTodo(newTodo)}),addBtn.addEventListener("click",function(){addTodo(newTodo)});